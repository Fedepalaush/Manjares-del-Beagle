{% extends "base.html" %}
{% block content %}
    <meta http-equiv="refresh" content="30">
    <h1>Pedidos pendientes</h1>
    {% if pedidos %} 
        {% for pedido in pedidos %}
            {% if pedido.estadoPedido.estado == 'pendiente' %}
                <h3>ID Pedido: {{ pedido.id }}</h3>
                <h4>Cliente: {{pedido.nombre_cliente}}</h4>
                <table class="table">
                    <thead> 
                        <tr align="center"> 
                            <td>Producto</td> 
                            <td>Cantidad</td> 
                            <td>Precio</td> 
                            <td>Subtotal</td>
                        </tr>
                    </thead> 
                    {% for pedidoProducto in pedidoProductos %}
                        {% if pedido.id == pedidoProducto.pedido.id %}
                            <tr>
                                <td>{{pedidoProducto.producto.nombre}}</td>
                                <td>{{pedidoProducto.cantidad}}</td>
                                <td>{{pedidoProducto.precioVariable}}</td>
                                <td>{{pedidoProducto.subtotal}}</td>
                            </tr>  
                        {% endif %}
                    {% endfor %}
                    <tr>
                        <td colspan="4">Total: $ {{ pedido.total }}</td>
                    </tr> 
                </table>
                <button><a href="/confirmar_pedido/{{pedido.id}}">Confirmar pedido</a></button>
                <button><a href="/rechazar_pedido/{{pedido.id}}">Rechazar pedido</a></button>
            {% endif %}
        {% endfor %}
    {% endif %}
{% endblock %}