{% extends 'Cliente/base.html'%}

{% block content %}
<h2 style="text-align: center;">Carrito</h2>
<hr style="height: 3px; background-color: black;" width="90%"/>

<br>
<div class="table-responsive" id="tableContainer">
    <table id="table" class="table table-striped table-bordered border-warning" style="max-width:100%">
        <thead>
            <tr>
                <th>Producto</th>
                <th>Cantidad</th>
                <th>Precio</th>
                <th>Subtotal</th>
                <th>Eliminar</th>
            </tr>
        </thead>
        <tbody>
                {% for datos in lista %}
                <tr>
                    <form action="/eliminarItem" method="post">
                        {% csrf_token %}
                        <input type="hidden" name="alimento" value={{datos.alimentoID}}>
                        <td><b>{{datos.alimentoNombre}}</b></td>            
                        <td>{{datos.cantidad}}</td>
                        <td>${{datos.precio}}</td>            
                        <td>${{datos.subtotal}}</td>
                        <td><button class="btn btn-danger btn-flat" type="submit">Quitar</button></td>
                    </form>
                </tr>
                {% endfor %}
                <td>Total: ${{total}}</td>
            </tbody>
    </table>
</div>
<br>
<br>
<a href="{% url 'indexCliente' %}" class="btn btn-primary btn-lg active" role="button" aria-pressed="true">Seguir comprando</a>
<a class="btn btn-primary btn-lg active" role="button" aria-pressed="true" 
style="position: absolute; right: 0;" onclick="vaciarCarrito()">Vaciar carrito</a>
<script>
    function vaciarCarrito() {
        $("#table td").remove(); 
    }
</script>

<br> <br>
    
<h2 style="text-align: center;">Datos Personales</h2>
<hr style="height: 3px; background-color: black;" width="90%"/>

<form action="/confirmarPedido" method="post">  
    {% csrf_token %}
    <div class="form-group row">
        <label for="example-text-input" class="col-1 col-form-label">Nombre</label>
        <div class="col-4">
            <input class="form-control" type="text" id="example-text-input">
        </div>
    </div>

    <div class="form-group row">
        <label for="example-text-input" class="col-1 col-form-label">Celular</label>
        <div class="col-4">
            <input class="form-control" type="text" id="example-text-input">
        </div>
    </div>

</form>

    <form>
        <fieldset style="width: 400px; border:1px solid black">
            <legend class="w-auto">Entrega</legend>
            <input name="entrega" type="radio" value="enlocal" onclick="ocultarDireccion()" />En local. <br>
            <input name="entrega" type="radio" value="endomicilio" onclick="mostrarDireccion()" />En domicilio.
            <input id="buscarTextField" type="text" size="50" placeholder="Ingrese su direcciÃ³n..."
            autocomplete="on" runat="server" style="display: none" />
        </fieldset>
        <fieldset style="width: 400px; border:1px solid black">
            <legend class="w-auto">Pago</legend>
            <input name="pago" type="radio" value="efectivo" />Efectivo. <br>
            <input name="pago" type="radio" value="tarjeta" />Tarjeta.
        </fieldset>
    </form>

    <!-- BOTON PAGAR MERCADO PAGO -->
            
    <script
   src="https://www.mercadopago.com.ar/integrations/v1/web-payment-checkout.js"
   data-preference-id="{{preference_id}}">
  </script>

    <!-- FIN MERCADO PAGO -->

    <a class="btn btn-primary btn-lg active" role="button" aria-pressed="true" style="position: absolute; right: 0;">Confirmar pedido</a>
        
    <script>
        function mostrarDireccion() {
            document.getElementById("buscarTextField").style.display= "inline";
        }
        function ocultarDireccion() {
            document.getElementById("buscarTextField").style.display= "none";
        }
    </script>

<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC5bJ7e24SdcnhOtbqPMfC30MrOlhLyMTI&libraries=places"></script>

{% endblock %}

